<ion-header>
  <ion-toolbar>
    <ion-title>
      Story View
    </ion-title>
  </ion-toolbar>
</ion-header>

<!-- <ion-content>
  
</ion-content> -->

<ion-content>
  <ion-grid>
    <!-- Story slides -->
    <ion-row>
      <ion-col>
        <ion-slides
          [options]="contentSliderOptions"
          (ionSlideDidChange)="slideChanged()"
          id="content-slider"
          #contentSlider
        >
          <!-- No stories found in this area -->
          <ion-slide *ngIf="stories.selected.value.length == 0">
            <ion-card>
              <img
                alt="No stories found in this area"
                src="https://cdn.pixabay.com/photo/2017/03/07/13/02/question-mark-2123969_960_720.jpg"
              />
              <ion-card-header>
                <ion-card-title>No stories found in this area</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                Please use the
                <span utmSource="https://google.com">Map view</span> to find new
                stories around you. Stories will be shown here when you get
                close
                <span utmSource="https://hetutrechtsarchief.nl/">enough</span>
                to a marker.
              </ion-card-content>
            </ion-card>
          </ion-slide>
          <ion-slide *ngFor="let story of stories.selected | async">
            <ion-card (click)="startStory(story)">
              <img
                src="{{ story['featured-image'] }}"
                alt="{{ story['title'] }}"
              />
              <ion-card-header>
                <ion-card-title>{{ story['title'] }}</ion-card-title>
                <ion-card-subtitle
                  >{{ story['time-period']['start'] }} -
                  {{ story['time-period']['end'] }}</ion-card-subtitle
                >
              </ion-card-header>
              <ion-card-content>
                {{ story['description'] }}
              </ion-card-content>
            </ion-card>
          </ion-slide>
        </ion-slides>
      </ion-col>
    </ion-row>
    <!-- Authors -->
    <ion-row>
      <ion-col>
        <ion-item-divider>
          <ion-label>Authors</ion-label>
        </ion-item-divider>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col class="ion-margin-horizontal">
        <!-- Author selection -->
        <ion-select
          multiple
          [interfaceOptions]="authorSelectionOptions"
          placeholder="Select authors..."
          (ionChange)="selectedAuthorsChanged($event.target.value)"
          [hidden]="true"
          #authorSelect
        >
          <ion-select-option
            *ngFor="let author of authors.all | async"
            [value]="author['@id']"
            selected
          >
            {{ author['name'] }}
          </ion-select-option>
        </ion-select>

        <!-- Author icons -->
        <ion-chip
          *ngFor="let author of authors.selected | async"
          outline
          color="primary"
          id="{{ author['@id'] }}"
        >
          <ion-img
            [src]="author['logo']"
            class="author-logo-img ion-padding-end"
          ></ion-img>
          <ion-label>{{ author['name'] }}</ion-label>
        </ion-chip>

        <!-- Author selection -->
        <ion-button
          expand="block"
          (click)="openAuthorSelectionPopup()"
          class="ion-margin-top"
          id="author-select-btn"
        >
          Select authors
        </ion-button>
      </ion-col>
    </ion-row>

    <!-- Range selectors -->
    <ion-row>
      <!-- Time Range -->
      <ion-col>
        <ion-item-divider>
          <ion-label> Time Range</ion-label>
        </ion-item-divider>
        <ion-range
          id="time-range"
          dual-knobs
          pin
          min="1900"
          max="2019"
          value="2019"
          steps="1"
          snaps
          color="dark"
        >
          <ion-icon slot="start" size="small" name="time"></ion-icon>
          <ion-icon slot="end" name="time"></ion-icon>
        </ion-range>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
